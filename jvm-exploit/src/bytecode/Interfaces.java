package bytecode;

import java.io.IOException;
import java.util.AbstractList;

public class Interfaces extends AbstractList<String> {
	private final String[] interfaceNames;

	public Interfaces(ByteCodeReader reader, ConstantPool constantPool) throws IOException {
		int interfacesCount = reader.read2u();
		
		interfaceNames = new String[interfacesCount];
		for(int i = 0; i < interfacesCount; i++){
			int index = reader.read2u();
			
			ConstantClassInfo classInfo = (ConstantClassInfo)constantPool.get(index);
			ConstantUtf8Info interfaceNameInfo = (ConstantUtf8Info)constantPool.get(classInfo.getClassNameIndex());
			
			interfaceNames[i] = interfaceNameInfo.getString();					
		}
	}

	@Override
	public String toString() {
		StringBuilder sb = new StringBuilder();
		for(String name : interfaceNames)
			sb.append(name).append(" ");
		return sb.toString();
	}

	@Override
	public String get(int index) {
		return interfaceNames[index];
	}

	@Override
	public int size() {
		return interfaceNames.length;
	}

}
