package bytecode;

import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.IOException;

public class ClassFile {
	private U4 magic;
	private U2 minorVersion;
	private U2 majorVersion;
	private ConstantPool constantPool;
	private AccessFlags accessFlags;

	public ClassFile(String classFilePath) throws IOException {
		try (FileInputStream is = new FileInputStream(classFilePath)) {
			try (DataInputStream stream = new DataInputStream(is)) {
				magic = new U4(stream);
				minorVersion = new U2(stream);
				majorVersion = new U2(stream);
				constantPool = new ConstantPool(stream);
				accessFlags = new AccessFlags(stream);
			}
		}
	}

	@Override
	public String toString() {
		StringBuilder sb = new StringBuilder();
		sb.append(String.format("Magic: %s%n", magic))
				.append(String.format("Minor Version: %s%n", minorVersion))
				.append(String.format("Major Version: %s%n", majorVersion))
				.append(String.format("Constant Pool: %n%s", constantPool))
				.append(String.format("Access Flags: %s%n", accessFlags))
				;
		return sb.toString();
	}

}
