package bytecode;

import java.io.IOException;

public abstract class ConstantPoolInfo {
	public static ConstantPoolInfo instance(ByteCodeReader reader) throws IOException {
		ConstantPoolInfo constantPoolInfo;
		
		int tag = reader.read1u();
		switch(tag) {
			case 1:
				constantPoolInfo = new ConstantUtf8Info(reader);
				break;
			case 7:
				constantPoolInfo = new ConstantClassInfo(reader);
				break;
			case 10:
				constantPoolInfo = new ConstantMethodRefInfo(reader);
				break;
			case 12:
				constantPoolInfo = new ConstantNameAndTypeInfo(reader);
				break;
			default:
				throw new ClassFormatError(String.format("invalid constant pool tag %d", tag));
		}
		
		return constantPoolInfo;
	}
}