package bytecode;

import java.io.DataInputStream;
import java.io.IOException;

public abstract class ConstantPoolInfo {
	public static ConstantPoolInfo instance(DataInputStream stream) throws IOException {
		ConstantPoolInfo constantPoolInfo;
		
		int tag = new U1(stream).getValue();
		switch(tag) {
			case 1:
				constantPoolInfo = new ConstantUtf8Info(stream);
				break;
			case 7:
				constantPoolInfo = new ConstantClassInfo(stream);
				break;
			case 10:
				constantPoolInfo = new ConstantMethodRefInfo(stream);
				break;
			case 12:
				constantPoolInfo = new ConstantNameAndTypeInfo(stream);
				break;
			default:
				throw new ClassFormatError(String.format("invalid constant pool tag %d", tag));
		}
		
		return constantPoolInfo;
	}
}