package attributes;

import java.io.IOException;

import bytecode.ByteCodeReader;
import bytecode.ConstantPool;

public abstract class Attribute {
	private final String attributeName;
	
	public Attribute(ByteCodeReader reader, ConstantPool constantPool) throws IOException {
		// u2 attribute_name_index;
		this.attributeName = constantPool.getUtf8String(reader.read2u());
		
		// u4 attribute_length;
		int infoLength = reader.read4u();
		// u1 info[attribute_length];
		byte[] info = reader.readBytes(infoLength);
		read(new ByteCodeReader(info), constantPool);
	}
	
	protected abstract void read(ByteCodeReader reader, ConstantPool constantPool) throws IOException;

	@Override
	public String toString() {
		return String.format("%s", attributeName);
	}
}
